<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Feedback App</title>
    <link href="style.css" type="text/css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <script type="text/javascript">
        //we're using a stacked card approach for our main viewing area
        //this array holds the ids of our cards and the method
        //allows us to easly switch the interface from one to the other
        var contentPanels = ['logonPanel', 'homePanel', 'socialPanel', 'ideaPanel'];
        //this function toggles which panel is showing, and also clears data from all panels
        function showPanel(panelId) {
            //clearData();
            for (var i = 0; i < contentPanels.length; i++) {
                if (panelId == contentPanels[i]) {
                    $("#" + contentPanels[i]).css("visibility", "visible");
                }
                else {
                    $("#" + contentPanels[i]).css("visibility", "hidden");
                }
            }
        }



        //this function clears data from all panels
        function clearData() {
            $("#homeBox").empty();
            clearLogon();
        }





        function LogOn(eMail) {
            //the url of the webservice we will be talking to
            var webMethod = "WebService.asmx/LogOn";
            //the parameters we will pass the service (in json format because curly braces)
            //note we encode the values for transmission over the web.  All the \'s are just
            //because we want to wrap our keynames and values in double quotes so we have to
            //escape the double quotes (because the overall string we're creating is in double quotes!)
            var parameters = "{\"eMail\":\"" + encodeURI(eMail) + "\"}";

            //jQuery ajax method
            $.ajax({
                //post is more secure than get, and allows
                //us to send big data if we want.  really just
                //depends on the way the service you're talking to is set up, though
                type: "POST",
                //the url is set to the string we created above
                url: webMethod,
                //same with the data
                data: parameters,
                //these next two key/value pairs say we intend to talk in JSON format
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                //jQuery sends the data and asynchronously waits for a response.  when it
                //gets a response, it calls the function mapped to the success key here
                success: function (msg) {
                    //the server response is in the msg object passed in to the function here
                    //since our logon web method simply returns a true/false, that value is mapped
                    //to a generic property of the server response called d (I assume short for data
                    //but honestly I don't know...)
                    if (msg.d) {
                        //server replied true, so show the accounts panel
                        alert("Login successful! Welcome.");
                        showPanel('homePanel');
                    }
                    else {
                        //server replied false, so let the user know
                        //the logon failed
                        alert("logon failed");
                    }
                },
                error: function (e) {
                    //if something goes wrong in the mechanics of delivering the
                    //message to the server or the server processing that message,
                    //then this function mapped to the error key is executed rather
                    //than the one mapped to the success key.  This is just a garbage
                    //alert becaue I'm lazy
                    alert("Issue with Connection.");
                }
            });
  

            function clearLogon() {
                $('#logonId').val("");
            }

            jQuery(function () {
                //when the app loads, show the logon panel to start with!
                showPanel('logonPanel');
            });
        }
    </script>



</head>
<body>

    <div class="contentContainer">






        <div id="logonPanel" class="contentPanel logonPanel">
            <div class="logonBox">
                <form onsubmit="LogOn($('#logonId').val()); return false;">
                    <h1>Feedback App</h1>
                    <h3>Login Screen</h3>
                    <p>
                        <br>
                        User eMail:
                        <br>
                        <input id="logonId" type="text">

                        <br>
                        <br>
                        <button type="submit">Login!</button>
                    </p>
                    <br><br>
                </form>
            </div>
            <footer id="footer">
                Copyright &copy; 2019 Team Nala
            </footer>
        </div>
    </div>






    <div id="homePanel" class="contentPanel" style="visibility:hidden;">

        <div class="homeBox" id="homeBox">


            <header id="header">
                <div class="header-main">
                    <h1>
                        Welcome Back!
                    </h1>
                    <!--
                        <div class="dropdown">
                        <button class="dropbtn">Options</button>
                           <div class="dropdown-content">
                                <a href="showPanel('socialPanel');">Social Page</a>
                                <a class="exit" href="logon.html">Logout</a>
                            </div>
                        </div>
                    -->
                    <button onclick=showPanel('socialPanel')>Social Page</button>
                    <button onclick=showPanel('ideaPanel')>Idea Submission</button>
                    <button onclick=showPanel('logonPanel')>Exit</button>

                </div>
            </header>

            <footer id="footer">
                Copyright &copy; 2019 Team Nala
            </footer>


        </div>
    </div>





    <div id="socialPanel" class="contentPanel" style="visibility:hidden;">
        <div class="Social">
            <button onclick=showPanel('homePanel')>Home</button>
            <button onclick=showPanel('ideaPanel')>Idea Submission</button>
            <button onclick=showPanel('logonPanel')>Exit</button>
        </div>
        Here are recent posts from your peers!

        <div class="header-image">
            <img src="media.png" alt="social media">
        </div>


    </div>





    <div id="ideaPanel" class="contentPanel" style="visibility:hidden;">
        <div class="Social">
            <button onclick=showPanel('homePanel')>Home</button>
            <button onclick=showPanel('socialPanel')>Social Panel</button>
            <button onclick=showPanel('logonPanel')>Exit</button>
        </div>
        Submit any game changing ideas on your mind here.

        <div class="header-image">
            <img src="idea.png" alt="lightbulb">
        </div>


    </div>







</body>
</html>